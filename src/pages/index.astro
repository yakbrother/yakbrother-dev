---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import LinkCard from '../components/LinkCard.astro';
import PostCard from '../components/PostCard.astro';
import { Image } from 'astro:assets';
const posts = (await getCollection('posts', ({ data }) => {
    return data.public !== false;
}))
    .sort((a, b) => b.data.publicationDate.valueOf() - a.data.publicationDate.valueOf())
    .slice(0,5);

const finds = (await getCollection('finds', ({ data }) => {
    return data.public !== false;
}))
    .sort((a, b) => b.data.publicationDate.valueOf() - a.data.publicationDate.valueOf())
    .slice(0, 10);
---

<Layout title="Home">
  <article class="page-content" role="main">
 	<section id="hero" class="flow" aria-labelledby="hero-heading">
      <div class="hero-title">
        <picture>
          <source srcset="/tim_avatar.webp" type="image/webp">
          <img 
            src="/tim_avatar.jpg" 
            alt="Profile photo of Tim Eaton" 
            width="200" 
            height="200" 
            loading="lazy" 
            class="avatar-image"
            role="img"
          >
        </picture>
        <div class="hero-text">
            <h1 id="hero-heading" class="high-contrast">Timothy Eaton</h1>
            <p id="subtitle" class="high-contrast">He/Him | Senior Full-Stack Developer | Nyon, Switzerland</p>
        </div>
      </div>
    </section>

    <section id="intro" class="flow">
      <p>
        Greetings, people of earth! I specialize in back-end development and user experience design. I build accessible, user-friendly tools and websites using Python, PHP (Laravel), Go, Node.js, React, Typescript, AWS, and various other technologies, whether I'm working from scratch or updating legacy code.
      </p><p>
        I have very strong views on AI that constantly change. In general, I'm a fan of it being my intern. All work must be checked by me, line by line. I don't use it to write content, but for a boilerplate API or a first draft of a feature, it can save days of work.
        </p>
      <p>
        But don't let it touch your CSS. Maybe it's because it's my favorite part of development, but I've argued with Claude enough this year to know that it's terrible at CSS.
      </p><p>
        Recently, I've been focused on two things:
        <ul>
          <li>Security and Dev Ops - I just was certified in Application Security with IBM and I'm now working through a data engineering course.
          <li>Creating websites that help reduce both carbon footprints and operating costs. To learn more about sustainable web design, check out <a href="https://the-sustainable.dev/">sustainable.dev</a>.
            <li>Agent training, machine learning, and AI-related development.</li>
          </ul>
      </p><p>
        I'm in the Geneva area, working as a developer, but also available for new projects and collaborations. Or coffee and a lunch spent talking about insects and plants and not mentioning computers. Email me to start a conversation!
      </p>

      <ul id="action-links">
        <li><a href="mailto:hello@timeaton.dev">Email</a></li>
        <li><a href="https://github.com/yakbrother">Github</a></li>
        <li><a href="https://www.linkedin.com/in/tim-eaton-pluies/">LinkedIn</a></li>
        <li><a href="https://bsky.app/profile/yakbrother.bsky.social">Bluesky</a></li>
      </ul>

    </section>

    <hr />

    <section id="recent-work">
        <h2>Recent work</h2>
          <ul>
              <li>Working with Ranova.ai in Python and Typescript - on the data pipeline, app, and API sides.</li>
	      <li>Designing a (secret) Swift-based Mac app.</li>
        <li>Working on a CLI for folder cleanup called <a href="https://github.com/yakbrother/folder-elf-cli">FolderElf</a>, now in it's first release.</li>
              
		<li>Created <a href="https://github.com/yakbrother/yak-a11y">Yak-A11y</a>, an npm plugin to test for web accessibility and give friendly, helpful feedback.</li>
		<li>Redesigned <a href="https://mostlytrue.life">Mostly True</a>, a personal blog written under a pseudonym, for crafting my writing skills.</li>
              <li>Upgraded <a href="https://astro.build/themes/details/glyptodon/">Glyptodon</a>, an open source theme for Astro based on this site.</li>

          </ul>
        </section>

    <hr />

  <!--
  <section id="word">
    <h2>Work Case Studies</h2>
    <div class="work-grid">
      <a href="/about" class="card">
        <h3>Online Agreement System</h3>
        <p>Building and managing a contract management system.</p>
      </a>
      <a href="/now" class="card">
        <h3>Now</h3>
        <p>See what I'm currently focused on.</p>
      </a>
      <a href="/resume" class="card">
        <h3>Designs Through the Years</h3>
        <p>How my design style has changed for this site.</p>
      </a>
    </div>
  </section>
 -->

  <section id="recent-posts" class="posts-section">
    <h2>Latest Posts</h2>
    <div class="posts-grid">
        {posts.map(post => (
            <PostCard
                title={post.data.title}
                description={post.data.description}
                publicationDate={post.data.publicationDate}
                category={post.data.category}
                slug={post.data.slug}
            />
        ))}
        <div style="display: flex; align-items: center; justify-content: center;">
          <a href="/posts" class="button-primary">View all posts â†’</a>
        </div>
    </div>
  </section>

  <hr />
  <section id="finds">
    <h2>Today I Found...</h2>
      <div class="finds-box">
    		{finds.map(entry => (
        <LinkCard
          type={entry.data.type}
          title={entry.data.title}
          publicationDate={entry.data.publicationDate}
          description={entry.data.description}
          link={entry.data.link}
        />
      ))}
    </div>
	</section>

  <style>
    .card {
      padding: 1rem;
      background: var(--color-card);
      border-radius: 8px;
      /* simplified shadow; avoid undefined border color var */
      box-shadow: var(--shadow-hover);
      border: 1px solid transparent;
      text-decoration: none;
      color: inherit;
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-hover);
      border-color: var(--color-accent);
    }
    .card h3 {
      margin: 0;
    }
    .card:hover h3 {
      color: var(--color-accent);
    }
    .card p {
      margin: 0.5rem 0 0;
    }

    .finds-box {
      padding: 0;
      border: none;
      border-radius: 0;
      overflow: visible;
      margin: 2rem 0;
    }

    /* Remove all borders from finds list */
    #finds .link-card {
      border: none;
      border-radius: 0;
      box-shadow: none;
    }

    #finds .link-card:hover {
      border: none;
      border-color: transparent;
      box-shadow: none;
    }

    /* Round the first and last items to create a unified box appearance */
    #finds .link-card:first-child {
      border-radius: 8px 8px 0 0;
    }

    #finds .link-card:last-child {
      border-radius: 0 0 8px 8px;
    }

    /* If there's only one item, round all corners */
    #finds .link-card:only-child {
      border-radius: 8px;
    }

    /* Define icon colors for finds */
    #finds .icon-container.video {
      color: #e74c3c; /* red for videos */
    }

    #finds .icon-container.article {
      color: #3498db; /* blue for articles */
    }

    #finds .icon-container.website {
      color: #2ecc71; /* green for websites */
    }

    #finds .icon-container.book {
      color: #9b59b6; /* purple for books */
    }

    #finds .icon-container.tool {
      color: #f39c12; /* orange for tools */
    }

    .posts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
    }

    .work-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 2rem;
        margin: 2rem 0;
    }

    /* ===== Hero Section ===== */
    #hero {
      padding-bottom: 1.5rem;
      padding-top: 2rem;
    }
    #hero .subtitle {
      margin: 0.5rem;
      font-size: var(--step-1);
      line-height: 1.25rem;
    }
    #hero-title {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
      /* reset to left-aligned avatar */
      flex-direction: row;
    }
    #hero h1 {
      display: inline-block;
      margin: 0;
      line-height: 2.25rem;
      font-weight: 700;

    }
    #hero img {
      border-radius: 9999px;
      border: 4px solid var(--color-accent);
      width: 8rem;
      height: 8rem;
    }

    #hero p {
      margin-top: 1rem;
      margin-bottom: 1rem;
    }

    #action-links {
        display: flex;
        align-items: baseline; /* typographic baseline alignment */
        margin: 0.25rem;
        flex-wrap: wrap;
        list-style-type: none
    }

    #action-links li a {
      display: inline-flex; /* participate in baseline alignment */
      align-items: baseline;
      line-height: 1; /* normalize inline box metrics */
      padding: 0.25rem 0.25rem 0.25rem 0; /* keep spacing without lifting baseline */
      margin-right: 0.5rem;
      font-weight: 700;
      border-color: var(--color-mid);
    }

    .pill-list {
      display: flex;
      margin-top: 2rem;
      flex-wrap: wrap;
      list-style-type: none
    }

    .pill-list li {
      padding: 0.25rem;
      margin: 0.5rem;
      border-radius: 0.25rem;
      border: 1px solid var(--color-mid);
      font-size: var(--step--1);
      line-height: 1.25rem;
    }

    /* ===== Featured & Recent Posts Sections ===== */
    #featured,
    #skills,
    #recent-work,
    #cases,
    #til,
    #recent-posts,
    #finds {
      padding-bottom: 1.5rem;
      padding-top: 1.5rem;
    }

    section h2 {
      font-weight: 600;
      letter-spacing: 0.025em;
    }
    .all-posts-btn-wrapper {
      text-align: center;
    }
  </style>
  </article>
</Layout>
